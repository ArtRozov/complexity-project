## $\bf{NP}$-полнота
Докажем, что задача проверки существования остовного дерева максимальной степени $\leq k$ (обозначим её как $\textsf{MDMST}(k)$ $-$ $\textsf{k-Maximum Degree in Minimum Spanning Tree}$) является $\bf{NP}$-полной для $\forall k \ge 2$.

### $\bf{NP}$-трудность.
* **Сведение $\bf{NP}$-полной задачи $\textsf{UHAMPATH}(G, s, t) - \textsf{задаче нахождения гамильтоного пути}$:**
  - Добавим к графу $G$ две вершины $a$ и $b$.
  - Проведем рёбра $(a,s)$ и $(b, t)$, образуя граф $G'$.
  - Решим задачу $\textsf{MDMST}(G', 2)$, получив остовное дерево, где степень каждой вершины $\leq$ 2.
  - Из свойств $G'$ следует, что полученный путь выглядит как $a \rightarrow s \rightarrow \dots \rightarrow t \rightarrow b$.
  - Удалим вершины $a$ и $b$, получив гамильтонов путь в графе $G$.
  - Таким образом, установлена биекция между множествами гамильтоновых путей в $G$ и остовных деревьев в $G'$, где степень вершины $\leq$ 2.
  - Получаем $\textsf{UHAMPATH} \le_p \textsf{MDMST}(2) \Rightarrow \textsf{MDMST}(2) \in \textbf{NPH}$.
* **Сведение $\textsf{MDMST}(2)$ к $\textsf{MDMST}(k)$:**
  - Для каждой вершины $v$ в графе $G'$ добавим $k-2$ вершины и соединим их рёбрами с $v$, получив граф $G''$.
  - Таким образом, установлена биекция между остовными деревьями в $G'$ и $G''$.
  - Получаем $\textsf{MDMST}(2) \le_p \textsf{MDMST}(k)$.

### Принадлежность к классу $\bf{NP}$
* **Сведение $\textsf{MDMST}(k)$ к $\bf{NP}$-полной задаче Constraint Programming (CP):**
  - Построим задачу $\sf{CP} \textsf{ - Constraint Programming}$ с $n \cdot k(k-1) + m \cdot 2k$ булевыми переменными, где $n$ и $m$ — количество вершин и рёбер в графе $G$ соответственно - следующим образом:
    
    - Каждую вершину $v$ исходного графа $G$ заменим на полный граф размера $k$. Эти вершины пронумеруем от $v_1$ до $v_k$. Отсюда получаем $n \cdot k$ вершин и $n \cdot k(k-1)$ ориентированных ребёр.

    - Каждое ребро $(u,v)$ исходного графа $G$ соответствуют $2k$ ориентированным рёбрам в графе $G^*$. Это рёбра $(u_i, v_i)$, $(v_i, u_i)$ для $i$ от $1$ до $k$.
  - Зададим ограничения на эти переменные:
    1. Для каждого ребра $(u, v)$ в $G$, наложим ограничение, что значение $True$ может принимать не более одной переменной среди $E_{u,v}$ и не более одной среди $E_{v,u}$, а также $\bigcup_{x \in E_{u,v}} x = \bigcup_{x \in E_{v,u}} x$.
* **Утверждение:**
  - $\exists$ остовное дерево в графе $G$ с максимальной степенью вершины не более $k$ $\Leftrightarrow$ $\exists$ решение поставленной задачи $\sf{CP}$.
  - **Доказательство $\Leftarrow$:**
    - Пусть есть решение задачи $\sf{CP}$, значит, $\exists$ ориентированный гамильтонов цикл в графе $G^*$, удовлетворяющий ограничениям.
    - Построим подграф $G'$ графа $G$ по циклу в $G^*$.
    - Граф $G'$ связен, содержит все вершины из $G$ и степень каждой вершины $\leq k$.
  - **Доказательство $\Rightarrow$:**
    - Пусть $\exists$ остовное дерево в $G$ с максимальной степенью вершины $\leq k$.
    - Составим гамильтонов цикл в графе $G^*$, используя обход остовного дерева.
    - По построению цикла удовлетворены ограничения для переменных в $\sf{CP}$.
* Таким образом, $\textsf{MDMST}(k) \in \textbf{NP}$, а следовательно, $\textsf{MDMST}(k) \in \textbf{NPC}$.
